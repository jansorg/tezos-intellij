<idea-plugin url="https://www.plugin-dev.com/project/tezos-michelson/">
    <id>tezos</id>

    <name>Tezos</name>
    <category>Custom Languages</category>
    <version>0.1.0</version>

    <vendor url="https://www.plugin-dev.com/" email="mail@plugin-dev.com">Joachim Ansorg</vendor>

    <!-- Compatible with IDEA 2016.1 and later, up to 183.x -->
    <idea-version since-build="145.0"/>
    <depends>com.intellij.modules.lang</depends>

    <description><![CDATA[<html>
        IntelliJ support for the Tezos platform.
        It provides smart support for the Michelson language: parsing, code highlighting, formatting, code completion, live templates, and more.
    </html>]]></description>

    <change-notes><![CDATA[
        <html>
        <b>Version 0.7.0</b>
        <ul>
            <li>Client settings: add button to autodetect the client on $PATH (tezos-client, mainnet.sh and alphanet.sh)</li>
            <li>Client settings: add button to copy the currently selected client configuration</li>
            <li>Improved layout of the stack visualization panel</li>
        </ul><br><br>

        <b>Version 0.6.1</b>
        <ul>
            <li>Include all changes scheduled for 0.6.0</li>
        </ul><br><br>

        <b>Version 0.6.0</b>
        <ul>
            <li>Feature: stack visualization for Michelson files</li>
            <li>Feature: settings to configure the appearance of the stack visualization</li>
            <li>Feature: settings to configure the available Tezos clients. It supports "tezos-client" and docker scripts ("alphanet.sh", "mainnet.sh", etc.)</li>
        </ul><br><br>

        <b>Version 0.5.0</b>
        <ul>
            <li>Improved code cmpletion for instructions</li>
            <li>Improved code cmpletion for type names</li>
            <li>Improved code cmpletion for tag names</li>
        </ul>
        </html>
    ]]>
    </change-notes>

    <extensionPoints>
    </extensionPoints>

    <!-- @formatter:off -->
    <extensions defaultExtensionNs="com.intellij">
        <fileTypeFactory implementation="com.tezos.lang.michelson.lang.MichelsonFileTypeFactory"/>
        <lang.ast.factory language="Michelson" implementationClass="com.tezos.lang.michelson.parser.MichelsonAstFactory" />
        <lang.parserDefinition language="Michelson" implementationClass="com.tezos.lang.michelson.parser.MichelsonParserDefinition"/>

        <!--Highlighting and basic validation-->
        <colorSettingsPage implementation="com.tezos.lang.michelson.editor.highlighting.MichelsonColorSettingsPage"/>
        <lang.syntaxHighlighterFactory language="Michelson" implementationClass="com.tezos.lang.michelson.editor.highlighting.MichelsonSyntaxHighlighterFactory"/>
        <additionalTextAttributes scheme="Default" file="colors/michelson_default.xml"/>
        <additionalTextAttributes scheme="Darcula" file="colors/michelson_darcula.xml"/>
        <annotator language="Michelson" implementationClass="com.tezos.lang.michelson.editor.highlighting.MichelsonHighlightingAnnotator"/>

        <!-- basic features -->
        <internalFileTemplate name="Michelson File" />
        <internalFileTemplate name="Michelson Contract" />
        <lang.braceMatcher language="Michelson" implementationClass="com.tezos.lang.michelson.editor.highlighting.MichelsonBraceMatcher"/>
        <lang.psiStructureViewFactory language="Michelson" implementationClass="com.tezos.lang.michelson.editor.structureView.MichelsonStructureViewFactory"/>
        <lang.foldingBuilder language="Michelson" implementationClass="com.tezos.lang.michelson.editor.folding.MichelsonFoldingBuilder"/>
        <lang.documentationProvider language="Michelson" implementationClass="com.tezos.lang.michelson.editor.documentation.MichelsonDocumentationProvider" />

        <!-- settings -->
        <applicationConfigurable groupId="language" provider="com.tezos.intellij.settings.ui.TezosConfigurableProvider"/>
        <applicationService id="tezos.settings" serviceImplementation="com.tezos.intellij.settings.TezosSettingService"/>

        <!-- live templates -->
        <defaultLiveTemplatesProvider implementation="com.tezos.lang.michelson.editor.liveTemplate.MichelsonLiveTemplatesProvider"/>
        <liveTemplateContext implementation="com.tezos.lang.michelson.editor.liveTemplate.MichelsonContext"/>
        <liveTemplateContext implementation="com.tezos.lang.michelson.editor.liveTemplate.MichelsonToplevelContext"/>
        <liveTemplateContext implementation="com.tezos.lang.michelson.editor.liveTemplate.MichelsonCodeContext"/>

        <!-- formatter -->
        <lang.formatter language="Michelson" implementationClass="com.tezos.lang.michelson.editor.formatter.MichelsonFormattingModelBuilder"/>
        <codeStyleSettingsProvider implementation="com.tezos.lang.michelson.editor.formatter.MichelsonCodeStyleSettingsProvider" />
        <langCodeStyleSettingsProvider implementation="com.tezos.lang.michelson.editor.formatter.MichelsonLangCodeStyleSettingsProvider" />

        <!-- code completion -->
        <completion.contributor language="Michelson" implementationClass="com.tezos.lang.michelson.editor.completion.MichelsonCompletionContributor" />

        <!-- stack visualization -->
        <fileEditorProvider implementation="com.tezos.lang.michelson.editor.stack.MichelsonSplitEditorProvider" />

        <!-- inspections -->

        <!-- intentions -->
    </extensions>
    <!-- @formatter:on -->

    <actions>
        <group id="tezos.NewMichelson" text="Michelson">
            <action id="tezos.NewMichelsonFile" class="com.tezos.lang.michelson.actions.CreateMichelsonFileAction"/>
            <add-to-group group-id="NewGroup" anchor="before" relative-to-action="NewFromTemplate"/>
        </group>

        <group id="tezos.editorToolbar">
            <!--<action id="tezos.editorAlignStack" class="com.tezos.lang.michelson.editor.stack.actions.AlignStackAction"/>-->
            <action id="tezos.editorHighlightUnchanged" class="com.tezos.lang.michelson.editor.stack.actions.HighlightUnchangedAction"/>
            <action id="tezos.editorShowAnnotations" class="com.tezos.lang.michelson.editor.stack.actions.ShowAnnotationsAction"/>
            <action id="tezos.editorUseColors" class="com.tezos.lang.michelson.editor.stack.actions.UseColoredRenderingAction"/>
        </group>
    </actions>
</idea-plugin>