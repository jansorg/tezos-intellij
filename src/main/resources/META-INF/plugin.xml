<idea-plugin url="https://www.plugin-dev.com/">
    <id>tezos</id>

    <name>Tezos</name>
    <category>Custom Languages</category>
    <version>0.1.0</version>

    <vendor url="https://www.plugin-dev.com/" email="mail@plugin-dev.com">Joachim Ansorg</vendor>

    <!-- Compatible with IDEA 2016.1 and later, up to 183.x -->
    <idea-version since-build="145.0"/>
    <depends>com.intellij.modules.lang</depends>

    <description><![CDATA[<html>
        IntelliJ support for the Tezos platform. It provides smart support for the Michelson language.
    </html>]]></description>

    <change-notes><![CDATA[
        <html>
        <b>Version 0.3</b>
        <ul>
            <li>Brace matcher to highlight pairs of () and {}</li>
            <li>Structure view for Michelson files</li>
            <li>Folding builder for Michelson files</li>
            <li>Formatter: new option "leading space in line comment". Adds a leading space if there's no space yet betwee # and the comment. Keeps existing spaces.</li>
            <li>Formatter: new option to align end-of-line comments inside of instruction blocks, disabled by default</li>
            <li>Formatter: new option to align annotations insode of complex types, disabled by default</li>
        </ul><br><br>

        <b>Version 0.2</b>
        <ul>
            <li>Highlighting errors in macro names and macro arguments (DUP, DIP, PAIR, UNPAIR, CADR, SET_CADR, MAP_CADR and variants)</li>
            <li>Basic formatting of Michelson files</li>
        </ul><br><br>

        <b>Version 0.1</b>
        <ul>
            <li>Initial release</li>
            <li>Michelson parsing and error highlighting</li>
            <li>Michelson syntax highlighting</li>
            <li>New file template for Michelson</li>
        </ul>
        </html>
    ]]>
    </change-notes>

    <extensionPoints>
    </extensionPoints>

    <!-- @formatter:off -->
    <extensions defaultExtensionNs="com.intellij">
        <fileTypeFactory implementation="com.tezos.lang.michelson.MichelsonFileTypeFactory"/>
        <lang.ast.factory language="Michelson" implementationClass="com.tezos.lang.michelson.parser.MichelsonAstFactory" />
        <lang.parserDefinition language="Michelson" implementationClass="com.tezos.lang.michelson.parser.MichelsonParserDefinition"/>

        <!--Highlighting and basic validation-->
        <colorSettingsPage implementation="com.tezos.lang.michelson.highlighting.MichelsonColorSettingsPage"/>
        <lang.syntaxHighlighterFactory language="Michelson" implementationClass="com.tezos.lang.michelson.highlighting.MichelsonSyntaxHighlighterFactory"/>
        <additionalTextAttributes scheme="Default" file="colors/michelson_default.xml"/>
        <additionalTextAttributes scheme="Darcula" file="colors/michelson_darcula.xml"/>
        <annotator language="Michelson" implementationClass="com.tezos.lang.michelson.highlighting.MichelsonHighlightingAnnotator"/>

        <!-- basic features -->
        <internalFileTemplate name="Michelson File" />
        <internalFileTemplate name="Michelson Contract" />
        <lang.braceMatcher language="Michelson" implementationClass="com.tezos.lang.michelson.highlighting.MichelsonBraceMatcher"/>
        <lang.psiStructureViewFactory language="Michelson" implementationClass="com.tezos.lang.michelson.structureView.MichelsonStructureViewFactory"/>
        <lang.foldingBuilder language="Michelson" implementationClass="com.tezos.lang.michelson.folding.MichelsonFoldingBuilder"/>

        <!-- formatter -->
        <lang.formatter language="Michelson" implementationClass="com.tezos.lang.michelson.formatter.MichelsonFormattingModelBuilder"/>
        <codeStyleSettingsProvider implementation="com.tezos.lang.michelson.formatter.MichelsonCodeStyleSettingsProvider" />
        <langCodeStyleSettingsProvider implementation="com.tezos.lang.michelson.formatter.MichelsonLangCodeStyleSettingsProvider" />

        <!-- inspections -->

        <!-- intentions -->
    </extensions>
    <!-- @formatter:on -->

    <actions>
        <group id="tezos.NewMichelson" text="Michelson">
            <action id="tezos.NewMichelsonFile" class="com.tezos.lang.michelson.actions.CreateMichelsonFileAction"/>
            <add-to-group group-id="NewGroup" anchor="before" relative-to-action="NewFromTemplate"/>
        </group>
    </actions>
</idea-plugin>